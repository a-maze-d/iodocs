(function(){$("li.method.post, li.method.put").on("click",function(event){event.stopPropagation();updateContentTextArea($(this).children("form").children("div.content"))});$(".content").find("ul.parameters").on("change click keyup","input, select",function(event){event.stopPropagation();updateContentTextArea($(this))});function updateContentTextArea(elem){var root=elem.closest("div.content");var paramList=root.children("ul.parameters");var snapshotObject=handleTable(paramList);updateTextArea(elem,snapshotObject)}function handleTable(paramList,type){if(type=="collection"){var collectionValue=handleCollection(paramList.children("li"));if(collectionValue.length>0){return collectionValue}else{return}}if(type=="object"){var objectValue=handleObject(paramList.children("li"));if(Object.keys(objectValue).length!==0){return objectValue}else{return}}if(type=="list"){var listValue=handleList(paramList.children("li"));if(listValue.length>0){return listValue}else{return}}if(type=="list-only"){var listValue=handleList(paramList.children("li"));if(listValue.length>0){return listValue}else{return}}var rows=paramList.children("li");var obj={};rows.each(function(){var row=$(this).children("ul");var type=row.children("li.type").text();type=type.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(row.hasClass("header")){}else{var name=rowName(row);var val=rowValue(row)}if(type=="list-only"){var test=rowValue(row);obj=test}else{$.extend(obj,createSimpleObject(name,val))}});return obj}function handleCollection(elements){var collectionsArray=[];elements.children().each(function(event){var val=rowValue($(this));var name=rowName($(this));var attr=$(this).parent().attr("class");if(attr!=""&&undefined!=attr&&undefined!==val){collectionsArray.push({name:name,value:val,"class":attr})}});return createCollectionValue(collectionsArray)}function handleObject(elements){var tempObj={};elements.children().each(function(event){var val=rowValue($(this));var name=rowName($(this));$.extend(tempObj,createSimpleObject(name,val))});return tempObj}function handleList(elements){var collectionsArray=[];elements.children().each(function(event){var val=formatValue($(this).val());if(val){collectionsArray.push(val)}});return collectionsArray}function rowName(row){return name=row.children("li.name").text()}function rowValue(row){var type=row.children("li.type").text();type=type.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(type=="boolean"||type=="enumerated"||type=="string"||type=="integer"||type==""){var val;val=row.children("li.parameter").children("input, select").val();if(val!=""){return formatValue(val)}}else if(type=="collection"||type=="object"){var paramList=row.children("li.parameter").children("ul.parameters");return handleTable(paramList,type)}else if(type=="list"||type=="list-only"){var paramList=row.children("li.parameter").children("ul");return handleTable(paramList,type)}}function createCollectionValue(collectionsArray){var currentObj="",tempObj={},collectionValue=[];for(var i=0;i<collectionsArray.length;i++){var name=collectionsArray[i]["name"];var value=collectionsArray[i]["value"];if(collectionsArray[i]["class"]==currentObj){$.extend(tempObj,createSimpleObject(name,value))}else{currentObj=collectionsArray[i]["class"];if(Object.keys(tempObj).length!==0){collectionValue.push(tempObj);tempObj={}}tempObj=createSimpleObject(name,value)}if(i==collectionsArray.length-1){if(Object.keys(tempObj).length!==0){collectionValue.push(tempObj)}}}return collectionValue}function createSimpleObject(name,value){var tempObj={};tempObj[name]=value;return tempObj}function formatValue(value){if(value=="value"||value=="true"){return true}else if(value=="false"){return false}else if(/^\d+$/.test(value)){return parseInt(value)}else{return value}}function updateTextArea(element,dataObject){var goal=element.closest("li.method").children("form").children("div.content").children("div.fields").children("textarea");goal.val(JSON.stringify(dataObject,null,2))}$("li.name").on("click","a.add-collection, a.add-list",function(event){event.stopPropagation();if($(this).hasClass("add-collection")){var collectionClass=$(this).parent().siblings("li.parameter").children("ul.parameters").children(":first").attr("class");collectionClass=collectionClass.replace(/^\s\s*/,"").replace(/\s\s*$/,"");var collectionBody=$(this).parent().siblings("li.parameter").children("ul.parameters").clone(true,true);var lastRow=$(this).parent().siblings("li.parameter").children("ul.parameters").children().last();var collectionCount=0;if(lastRow.hasClass("collection-original")){collectionCount=1}else{collectionCount=parseInt(lastRow.attr("class").replace(/collection-new-/g,""));collectionCount++}newCollectionObject(collectionBody,collectionClass,collectionCount);$(this).parent().siblings("li.parameter").children("ul.parameters").append(collectionBody.children())}else if($(this).hasClass("add-list")){var listElement=$(this).parent().siblings("li.parameter").children("ul");var firstListElement=listElement.children().first().clone();firstListElement.appendTo(listElement)}});function newCollectionObject(collectionBody,collectionClass,collectionCount){collectionBody.children().each(function(){var type=$(this).children("ul").children("li.type").text();type=type.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(!$(this).hasClass(collectionClass)){$(this).remove()}else{$(this).removeClass(collectionClass);$(this).addClass("collection-new-"+collectionCount);if(type=="collection"){newCollectionObject($(this).children("ul.collection").children("li.parameter").children("ul.parameters"),collectionClass,collectionCount)}}})}$("li").on("click","a.collection-minimize, a.list-minimize",function(event){event.stopPropagation();var minimize_class=$(this).parent().parent().parent().next().attr("class");if(minimize_class===undefined){$(this).parent().parent().parent().siblings().slideToggle()}else{minimize_class=minimize_class.replace(/^\s\s*/,"").replace(/\s\s*$/,"");$(this).parent().parent().parent().siblings("."+minimize_class).slideToggle()}if($(this).parent().hasClass("rotate")){$(this).parent().removeClass("rotate")}else{$(this).parent().addClass("rotate")}})})();(function(){var searchResults;var maxItems=20;$.widget("custom.catcomplete",$.ui.autocomplete,{_renderMenu:function(ul,items){searchResults=items;var that=this,currentCategory="";var matchedMethodCount={};for(var i=0;i<items.length;i++){if(items[i].category!==currentCategory){currentCategory=items[i].category;matchedMethodCount[currentCategory]=0}if(items[i].category===currentCategory){matchedMethodCount[currentCategory]++}}currentCategory="";$.each(items,function(index,item){if(item.category!=currentCategory){var uiItem=$("<li>").addClass("ui-autocomplete-category").text(item.category+" | Methods matched: "+matchedMethodCount[item.category]).click(function(event){$(this).nextUntil(".ui-autocomplete-category").slideToggle()}).hover(function(){$(this).css("cursor","pointer");$(this).css("text-decoration","underline")},function(){$(this).css("text-decoration","none")});ul.append(uiItem);currentCategory=item.category}that._renderItem(ul,item,items.length)})},_renderItem:function(ul,item,count){var that=this;var link="#"+(item.category+"-"+item.type+"-"+item.label).replace(/\s/g,"-");var testreturn=$("<li>").append($("<a href="+link+">").text(item.label)).addClass(item.type.toLowerCase()).click(function(event){if(/PUT|POST|GET|DELETE/.test(link)){var div_node=$("div.clickable").has('a[href="'+link+'"]');if(div_node.closest("li.endpoint").hasClass("expanded")){}else{div_node.closest("li.endpoint").toggleClass("expanded");div_node.closest("li.endpoint").children("ul.methods").slideToggle()}div_node.siblings("form").slideToggle()}that.close(event);event.preventDefault()}).appendTo(ul);if(count>maxItems){return testreturn.css("display","none")}else{return testreturn}}});$("#search1").catcomplete({source:"search",minLength:2});$("#searchForm").submit(function(){clearSearch();if($("#search1").val().length>0){$("#search1").catcomplete("close");$("li.endpoint > h3.title span.name").each(function(){if(!matching($(this).text(),searchResults)){$(this).parent().parent().addClass("hide-this")}else{$(this.parentNode).siblings("ul.methods").children("li.method").each(function(){if(!matching($(this).find("div.title span.name").text(),searchResults)){$(this).addClass("hide-this")}else{}});$("ul.methods",this.parentNode.parentNode).slideToggle();$(this.parentNode.parentNode).toggleClass("expanded")}})}return false});$("#clear-search").click(function(){clearSearch()});function matching(text,searchResults){for(var k=0;k<searchResults.length;k++){for(var prop in searchResults[k]){if(searchResults[k][prop]==text){return true}}}return false}function clearSearch(){$("li.method.hide-this").removeClass("hide-this");var endpoints=$("ul.methods"),endpointsLength=endpoints.length;for(var x=0;x<endpointsLength;x++){var methodsList=$(endpoints[x]);methodsList.slideUp();methodsList.parent().toggleClass("expanded",false)}$("li.endpoint.hide-this").removeClass("hide-this")}})();(function(){var allEndpoints=$("li.endpoint"),allEndpointsLength=allEndpoints.length,allMethodLists=$("ul.methods"),allMethodListsLength=allMethodLists.length;function listMethods(context){var methodsList=$("ul.methods",context||null);for(var i=0,len=methodsList.length;i<len;i++){$(methodsList[i]).slideDown()}}$("li.method > div.title").click(function(){$("form",this.parentNode).slideToggle()});$("li.endpoint > h3.title span.name").click(function(){$("ul.methods",this.parentNode.parentNode).slideToggle();$(this.parentNode.parentNode).toggleClass("expanded")});$("#toggle-endpoints").click(function(event){event.preventDefault();var endpoints=$("ul.methods:not(:visible)"),endpointsLength=endpoints.length;if(endpointsLength>0){for(var x=0;x<endpointsLength;x++){var methodsList=$(endpoints[x]);methodsList.slideDown();methodsList.parent().toggleClass("expanded",true)}}else{var endpoints=$("ul.methods"),endpointsLength=endpoints.length;for(var x=0;x<endpointsLength;x++){var methodsList=$(endpoints[x]);methodsList.slideUp();methodsList.parent().toggleClass("expanded",false)}}});$("#toggle-methods").click(function(event){event.preventDefault();var methodForms=$("ul.methods form:not(:visible)"),methodFormsLength=methodForms.length;if(methodFormsLength>0){var methodLists=$("ul.methods:not(:visible)"),methodListsLength=methodLists.length;for(var x=0;x<methodListsLength;x++){$(methodLists[x]).slideDown()}for(var y=0;y<methodFormsLength;y++){$(methodForms[y]).slideDown()}}else{var visibleMethodForms=$("ul.methods form:visible"),visibleMethodFormsLength=visibleMethodForms.length;for(var i=0;i<visibleMethodFormsLength;i++){$(visibleMethodForms[i]).slideUp()}}for(var z=0;z<allEndpointsLength;z++){$(allEndpoints[z]).toggleClass("expanded",true)}});$("li.list-methods a").click(function(event){event.preventDefault();var endpoint=$(this).closest("li.endpoint"),methods=$("li.method form",endpoint);listMethods(endpoint);var visibleMethods=$.grep(methods,function(method){return $(method).is(":visible")});$(visibleMethods).each(function(i,method){$(method).slideUp()});$(endpoint).toggleClass("expanded",true)});$("li.expand-methods a").click(function(event){event.preventDefault();var endpoint=$(this).closest("li.endpoint"),methods=$("li.method form",endpoint);listMethods(endpoint);var hiddenMethods=$.grep(methods,function(method){return $(method).not(":visible")});$(hiddenMethods).each(function(i,method){$(method).slideDown()});$(endpoint).toggleClass("expanded",true)});$("div.headers h4").click(function(event){event.preventDefault();$(this.parentNode).toggleClass("expanded");$("div.fields",this.parentNode).slideToggle()});$("#credentials").submit(function(event){event.preventDefault();var params=$(this).serializeArray();$.post("/auth",params,function(result){if(result.signin){window.open(result.signin,"_blank","height=900,width=800,menubar=0,resizable=1,scrollbars=1,status=0,titlebar=0,toolbar=0")}})});$("#requestContent").change(function(){$(".requestContent").html('<pre class="prettyprint">'+$("#requestContent").val()+"</pre>");prettyPrint()});$("li.method form").submit(function(event){var self=this;event.preventDefault();var params=$(this).serializeArray(),apiKey={name:"apiKey",value:$("input[name=key]").val()},apiSecret={name:"apiSecret",value:$("input[name=secret]").val()},apiName={name:"apiName",value:$("input[name=apiName]").val()};params.push(apiKey,apiSecret,apiName);var resultContainer=$(".result",self);if(resultContainer.length===0){resultContainer=$(document.createElement("div")).attr("class","result");$(self).append(resultContainer)}if($("pre.response",resultContainer).length===0){var clearLink=$(document.createElement("a")).text("Clear results").addClass("clear-results").attr("href","#").click(function(e){e.preventDefault();var thislink=this;$(".result",self).slideUp(function(){$(this).remove();$(thislink).remove()})}).insertAfter($("input[type=submit]",self));resultContainer.append($(document.createElement("h4")).text("Call"));resultContainer.append($(document.createElement("pre")).addClass("call"));resultContainer.append($(document.createElement("h4")).text("Response Code"));resultContainer.append($(document.createElement("pre")).addClass("code prettyprint"));resultContainer.append($(document.createElement("h4")).text("Response Headers"));resultContainer.append($(document.createElement("pre")).addClass("headers prettyprint"));resultContainer.append($(document.createElement("h4")).text("Response Body").append($(document.createElement("a")).text("Select body").addClass("select-all").attr("href","#").click(function(e){e.preventDefault();selectElementText($(this.parentNode).siblings(".response")[0])})));resultContainer.append($(document.createElement("pre")).addClass("response prettyprint"))}console.log(params);$.post("/processReq",params,function(result,text){if(result.signin){window.open(result.signin,"_blank","height=900,width=800,menubar=0,resizable=1,scrollbars=1,status=0,titlebar=0,toolbar=0")}else{var response,responseContentType=result.headers["content-type"];response=livedocs.formatData(result.response,result.headers["content-type"]);$("pre.response",resultContainer).toggleClass("error",false).text(response)}}).complete(function(result,text){var response=JSON.parse(result.responseText);if(response.call){$("pre.call",resultContainer).text(response.call)}if(response.code){$("pre.code",resultContainer).text(response.code)}if(response.headers){$("pre.headers",resultContainer).text(formatJSON(response.headers))}prettyPrint()}).error(function(err,text){var response;if(err.responseText!==""){var result=JSON.parse(err.responseText),headers=formatJSON(result.headers);if(result.headers&&result.headers["content-type"]){response=livedocs.formatData(result.response,result.headers["content-type"])}else{response=result.response}}else{response="Error"}$("pre.response",resultContainer).toggleClass("error",true).text(response)})})})();var JSON;if(!JSON){JSON={}}(function(){"use strict";function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();(function(b){function c(){}for(var d="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),a;a=d.pop();)b[a]=b[a]||c})(window.console=window.console||{});function spaces(len){var s="",indent=len*4;for(var i=0;i<indent;i++){s+=" "}return s}function formatXML(str){var xml="";str=str.replace(/(>)(<)(\/*)/g,"$1\r$2$3");var pad=0,indent,node;var strArr=str.split("\r");for(var i=0,len=strArr.length;i<len;i++){indent=0;node=strArr[i];if(node.match(/.+<\/\w[^>]*>$/)){indent=0}else if(node.match(/^<\/\w/)&&pad>0){pad-=1}else if(node.match(/^<\w[^>]*[^\/]>.*$/)){indent=1}else{indent=0}xml+=spaces(pad)+node+"\r";pad+=indent}return xml}function formatJSON(jsonString){return JSON.stringify(jsonString,null,"    ")}function selectElementText(el,win){el.focus();win=win||window;var doc=win.document,sel,range;if(win.getSelection&&doc.createRange){sel=win.getSelection();range=doc.createRange();range.selectNodeContents(el);sel.removeAllRanges();sel.addRange(range)}else if(doc.body.createTextRange){range=doc.body.createTextRange();range.moveToElementText(el);range.select()}}var livedocs=function(){ld={};ld.formatData=function(data,contentType){if(!contentType||typeof contentType!="string"){return data}switch(true){case/application\/javascript/.test(contentType):case/application\/json/.test(contentType):if(typeof data=="string"){try{data=JSON.parse(data)}catch(e){console.log("Response said it was JSON, but it's not. :(")}}data=formatJSON(data);break;case/application\/xml/.test(contentType):case/text\/xml/.test(contentType):case/html/.test(contentType):data=formatXML(data);break}return data};ld.authSuccess=function(msg){var credentials=$("section.credentials");$("h2",credentials).remove();$("img",credentials).remove();credentials.addClass("authed").append($(document.createElement("span")).text(msg)).append($(document.createElement("img")).attr("src","/images/accept.png"))};return ld}(livedocs||{});